function _(id) { return document.getElementById(id); }
function getCookie(objName) {
    var strTemp = "";
    var arrStr = document.cookie.split("; ");
    for (var i = 0; i < arrStr.length; i++) {
        var temp = arrStr[i].split("=");
        if (temp[0] == objName)
            strTemp = temp[1];
    }
    return unescape(strTemp);
}
function setCookie(name, value, timeLen) {
    var date = new Date();
    date.setTime(date.getTime() + timeLen * 60 * 1000);
    document.cookie = name + "=" + escape(value) + ";path=/;expires=" + date.toGMTString();
    ;
}
function ErrorsNumber(minute, num) {
    var date = new Date();
    var strErrors = "";
    var strNewErrors = "";
    var count = 0;
    var arrLogin = new Array();
    var date = new Date();
    strErrors = getCookie("LoginErrors");
    if (strErrors == undefined) strErrors = "";
    arrError = strErrors.split(",")
    for (var i = 0; i < arrError.length; i++) {
        if (arrError[i] > date.getTime() - minute * 60 * 1000)
            strNewErrors = strNewErrors + "," + arrError[i];
    }
    setCookie("LoginErrors", strNewErrors, 12 * 60);
    if (strNewErrors.split(",").length > num) {
        alert('您在' + minute + '分钟内的连续登录错误次数超过' + num + '次，暂时禁止登录！');
        return false;
    }
    return true;
}
function CheckLoginStatus() {
    var date = new Date();
    var iStatus = getCookie("LoginStatus");
    setCookie("LoginStatus", "", +date.getTime());
    if (iStatus == "0") {
        setCookie("LoginErrors", getCookie("LoginErrors") + "," + date.getTime(), 12 * 60);
        setCookie("PersonLoginInfo", "", 0);
        alert("个人用户登录失败，用户名或密码错误。");
    }
    if (iStatus == "-1")
        alert("登录失败。您今天的登录次数已超过20次的限制，请明天再来。");
    if (iStatus == "-2")
        alert("登录失败。请进入用户反馈向我们反映，谢谢配合。");
    var LoginInfo = getCookie("PersonLoginInfo");
    if (LoginInfo != "") {
        _("AutoLogin").checked = true;
        var arr = LoginInfo.split(",");
        _("UserName").value = arr[0];
        _("Password").value = arr[1];
        _("frm").action = "/personal/sys/Login?goto=no";
        _("frm").target = "_self";
        // _("frm").submit();
    }
}
function checkSubmit() {
    if (_("UserName").value == "" || _("UserName").value == "用户名/邮箱/手机号") {
        alert("请输入用户名");
        _("UserName").value = ""
        _("Password").value = ""
        UserNameOnClick();
        _("UserName").focus();
        return false;
    }
    if (_("Password").value == "" || _("Password").value == "*******") {
        alert("请输入密码");
        _("Password").value = ""
        _("Password").focus();
        PasswordOnClick();

        return false;
    }
    if (!InFreeze(5))
        return false;

    _("UserName").value = escape(_("UserName").value);
    _("Password").value = escape(_("Password").value);
    return true;
}
function checkloginbyuserMobile(){
	if ($("#UserMobile").val() == "" || $("#UserMobile").val() == "已认证手机号") {
      alert("请输入已认证手机号");
      return false;
    }
    if ($("#txtVeriyCodeDuanXin").val() == "" || $("#txtVeriyCodeDuanXin").val() == "验证码") {
      alert("请输入验证码");
      return false;
    } 
}
var SubmitTime = 0;
function InFreeze(second) {
    var date = new Date();
    var now = date.getTime();
    if (now - second * 1000 < SubmitTime)
        return false;
    SubmitTime = now;
    return true;
}

function InputOnBlur(obj) {
    if (obj.value == "") {
        obj.className = "LoginText02";
    }
}

function UserNameOnClick() {
    var txtUserName = _("UserName");
    if (txtUserName.value == "用户名/邮箱/手机号") {
        txtUserName.value = "";
    }
    txtUserName.className = "Input_login_text";
}
function UserNameOnBlur() {
    var txtUserName = _("UserName");
    if (txtUserName.value == "") {
        txtUserName.value = "用户名/邮箱/手机号";
        txtUserName.className = "Input_login_text_unfocus";
    }
}
function PasswordOnClick() {
    var txtPassword = _("Password");
    if (txtPassword.className == "Input_login_password_unfocus") {
        txtPassword.value = "";
    }
    txtPassword.className = "Input_login_password";
}
function PasswordOnBlur() {
    var txtPassword = _("Password");
    if (txtPassword.value == "") {
        txtPassword.className = "Input_login_password_unfocus";
    }
}